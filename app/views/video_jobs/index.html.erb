<% content_for :title, "My video jobs" %>

<section class="mx-auto w-full max-w-4xl space-y-8">
  <header class="flex flex-col gap-2 md:flex-row md:items-center md:justify-between">
    <div>
      <p class="text-sm uppercase tracking-wide text-slate-500">History</p>
      <h1 class="text-3xl font-semibold text-slate-900">Recent conversions</h1>
    </div>
    <%= link_to "Start another job", new_video_job_path, class: "font-semibold text-sky-600 hover:text-sky-500" %>
  </header>

  <% if @video_jobs.any? %>
    <div class="divide-y divide-slate-200 rounded-3xl border border-slate-200 bg-white shadow-sm">
      <% @video_jobs.each do |video_job| %>
        <div class="flex flex-col gap-2 p-4 text-sm text-slate-700 md:flex-row md:items-center md:justify-between">
          <div>
            <p class="font-semibold text-slate-900">Job #<%= video_job.id %></p>
            <p class="text-xs text-slate-500">Submitted <%= time_ago_in_words(video_job.created_at) %> ago</p>
          </div>
          <span class="font-medium capitalize"><%= video_job.status %></span>
          <div class="flex gap-3 text-sm">
            <%= link_to "View", video_job_path(video_job), class: "font-semibold text-sky-600 hover:text-sky-500" %>
            <% if video_job.ready_for_download? %>
              <%= link_to "Download", download_video_job_path(video_job), class: "font-semibold text-emerald-600 hover:text-emerald-500" %>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="rounded-3xl border border-dashed border-slate-200 p-10 text-center text-slate-500">
      <p class="text-lg font-semibold text-slate-700">No conversions yet</p>
      <p class="mt-2">Kick things off by uploading an audio track and cover image.</p>
    </div>
  <% end %>
</section>
